#include <msp430.h> 

#define CPU_F          ((double)1000000)
#define delay_ms(x)    _delay_cycles((long)(CPU_F*(double)x/1000.0))

#define MAX_NOTE 300


#define CS_1 P6OUT |= BIT1
#define CS_0 P6OUT &= ~BIT1
#define CLK_1 P6OUT |= BIT2
#define CLK_0 P6OUT &= ~BIT2
#define DIN_1 P6OUT |= BIT0
#define DIN_0 P6OUT &= ~BIT0

unsigned char character[100][2][8] = {
                                        {{0x00, 0x00, 0x00,  0x00,  0x00,  0x00, 0x00, 0x00},
                                         {0x00, 0x00, 0x00,  0x00,  0x00,  0x00, 0x00, 0x00},},
                                        // A
                                        {{0b00011110,
                                          0b00100010,
                                          0b00100010,
                                          0b00111110,
                                          0b00100010,
                                          0b00100010,
                                          0b00100010,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b01111110,
                                          0b00001001,
                                          0b00001001,
                                          0b00001001,
                                          0b01111111,
                                          0b00000000,
                                         },
                                        },
                                        // B
                                        {{0b00111100,
                                          0b00100010,
                                          0b00100010,
                                          0b00111100,
                                          0b00100010,
                                          0b00100010,
                                          0b00111100,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b01111111,
                                          0b01001001,
                                          0b01001001,
                                          0b01001001,
                                          0b00110110,
                                          0b00000000,
                                         },
                                        },
                                        // C
                                        {{0b00011100,
                                          0b00100010,
                                          0b00100000,
                                          0b00100000,
                                          0b00100000,
                                          0b00100010,
                                          0b00011100,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b00111110,
                                          0b01000001,
                                          0b01000001,
                                          0b01000001,
                                          0b00100010,
                                          0b00000000,
                                         },
                                        },
                                        // D
                                        {{0b00111100,
                                          0b00100010,
                                          0b00100010,
                                          0b00100010,
                                          0b00100010,
                                          0b00100010,
                                          0b00111100,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b01111111,
                                          0b01000001,
                                          0b01000001,
                                          0b01000001,
                                          0b00111110,
                                          0b00000000,
                                         },
                                        },
                                        // E
                                        {{0b00111110,
                                          0b00100000,
                                          0b00100000,
                                          0b00111100,
                                          0b00100000,
                                          0b00100000,
                                          0b00111110,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b01111111,
                                          0b01001001,
                                          0b01001001,
                                          0b01001001,
                                          0b01000001,
                                          0b00000000,
                                         },
                                        },
                                        // F
                                        {{0b00111110,
                                          0b00100000,
                                          0b00100000,
                                          0b00111100,
                                          0b00100000,
                                          0b00100000,
                                          0b00100000,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b01111111,
                                          0b00001001,
                                          0b00001001,
                                          0b00001001,
                                          0b00000001,
                                          0b00000000,
                                         },
                                        },
                                        // G
                                        {{0b00011100,
                                          0b00100010,
                                          0b00100000,
                                          0b00100000,
                                          0b00100110,
                                          0b00100010,
                                          0b00011100,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b00111110,
                                          0b01000001,
                                          0b01000001,
                                          0b01010001,
                                          0b00110010,
                                          0b00000000,
                                         },
                                        },
                                        // H
                                        {{0b00100010,
                                          0b00100010,
                                          0b00100010,
                                          0b00111110,
                                          0b00100010,
                                          0b00100010,
                                          0b00100010,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b01111111,
                                          0b00001000,
                                          0b00001000,
                                          0b00001000,
                                          0b01111111,
                                          0b00000000,
                                         },
                                        },
                                        // I
                                        {{0b00011100,
                                          0b00001000,
                                          0b00001000,
                                          0b00001000,
                                          0b00001000,
                                          0b00001000,
                                          0b00011100,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b00000000,
                                          0b01000001,
                                          0b01111111,
                                          0b01000001,
                                          0b00000000,
                                          0b00000000,
                                         },
                                        },
                                        // J
                                        {{0b00000110,
                                          0b00000010,
                                          0b00000010,
                                          0b00000010,
                                          0b00100010,
                                          0b00100010,
                                          0b00011100,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b00110000,
                                          0b01000000,
                                          0b01000000,
                                          0b01000001,
                                          0b00111111,
                                          0b00000000,
                                         },
                                        },
                                        // K
                                        {{0b00100010,
                                          0b00100100,
                                          0b00101000,
                                          0b00110000,
                                          0b00101000,
                                          0b00100100,
                                          0b00100010,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b01111111,
                                          0b00001000,
                                          0b00010100,
                                          0b00100010,
                                          0b01000001,
                                          0b00000000,
                                         },
                                        },
                                        // L
                                        {{0b00100000,
                                          0b00100000,
                                          0b00100000,
                                          0b00100000,
                                          0b00100000,
                                          0b00100000,
                                          0b00111110,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b01111111,
                                          0b01000000,
                                          0b01000000,
                                          0b01000000,
                                          0b01000000,
                                          0b00000000,
                                         },
                                        },
                                        // M
                                        {{0b00100010,
                                          0b00110110,
                                          0b00101010,
                                          0b00100010,
                                          0b00100010,
                                          0b00100010,
                                          0b00100010,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b01111111,
                                          0b00000010,
                                          0b00000100,
                                          0b00000010,
                                          0b01111111,
                                          0b00000000,
                                         },
                                        },
                                        // N
                                        {{0b00100010,
                                          0b00100010,
                                          0b00110010,
                                          0b00101010,
                                          0b00100110,
                                          0b00100010,
                                          0b00100010,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b01111111,
                                          0b00000100,
                                          0b00001000,
                                          0b00010000,
                                          0b01111111,
                                          0b00000000,
                                         },
                                        },
                                        // O
                                        {{0b00011100,
                                          0b00100010,
                                          0b00100010,
                                          0b00100010,
                                          0b00100010,
                                          0b00100010,
                                          0b00011100,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b00111110,
                                          0b01000001,
                                          0b01000001,
                                          0b01000001,
                                          0b00111110,
                                          0b00000000,
                                         },
                                        },
                                        // P
                                        {{0b00111100,
                                          0b00100010,
                                          0b00100010,
                                          0b00111100,
                                          0b00100000,
                                          0b00100000,
                                          0b00100000,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b01111111,
                                          0b00001001,
                                          0b00001001,
                                          0b00001001,
                                          0b00000110,
                                          0b00000000,
                                         },
                                        },
                                        // Q
                                        {{0b00011100,
                                          0b00100010,
                                          0b00100010,
                                          0b00100010,
                                          0b00101010,
                                          0b00100100,
                                          0b00011010,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b00111110,
                                          0b01000001,
                                          0b01010001,
                                          0b00100001,
                                          0b01011110,
                                          0b00000000,
                                         },
                                        },
                                        // R
                                        {{0b00111100,
                                          0b00100010,
                                          0b00100010,
                                          0b00111100,
                                          0b00100010,
                                          0b00100010,
                                          0b00100010,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b01111111,
                                          0b00001001,
                                          0b00001001,
                                          0b00001001,
                                          0b01110110,
                                          0b00000000,
                                         },
                                        },
                                        // S
                                        {{0b00011100,
                                          0b00100010,
                                          0b00100000,
                                          0b00011100,
                                          0b00000010,
                                          0b00100010,
                                          0b00011100,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b00100110,
                                          0b01001001,
                                          0b01001001,
                                          0b01001001,
                                          0b00110010,
                                          0b00000000,
                                         },
                                        },
                                        // T
                                        {{0b00111110,
                                          0b00001000,
                                          0b00001000,
                                          0b00001000,
                                          0b00001000,
                                          0b00001000,
                                          0b00001000,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b00000001,
                                          0b00000001,
                                          0b01111111,
                                          0b00000001,
                                          0b00000001,
                                          0b00000000,
                                         },
                                        },
                                        // U
                                        {{0b00100010,
                                          0b00100010,
                                          0b00100010,
                                          0b00100010,
                                          0b00100010,
                                          0b00100010,
                                          0b00011100,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b00111111,
                                          0b01000000,
                                          0b01000000,
                                          0b01000000,
                                          0b00111111,
                                          0b00000000,
                                         },
                                        },
                                        // V
                                        {{0b00100010,
                                          0b00100010,
                                          0b00100010,
                                          0b00100010,
                                          0b00100010,
                                          0b00010100,
                                          0b00001000,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b00011111,
                                          0b00100000,
                                          0b01000000,
                                          0b00100000,
                                          0b00011111,
                                          0b00000000,
                                         },
                                        },
                                        // W
                                        {{0b00100010,
                                          0b00100010,
                                          0b00100010,
                                          0b00100010,
                                          0b00101010,
                                          0b00101010,
                                          0b00010100,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b00111111,
                                          0b01000000,
                                          0b00110000,
                                          0b01000000,
                                          0b00111111,
                                          0b00000000,
                                         },
                                        },
                                        // X
                                        {{0b00100010,
                                          0b00100010,
                                          0b00010100,
                                          0b00001000,
                                          0b00010100,
                                          0b00100010,
                                          0b00100010,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b01100011,
                                          0b00010100,
                                          0b00001000,
                                          0b00010100,
                                          0b01100011,
                                          0b00000000,
                                         },
                                        },
                                        // Y
                                        {{0b00100010,
                                          0b00100010,
                                          0b00010100,
                                          0b00001000,
                                          0b00001000,
                                          0b00001000,
                                          0b00001000,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b00000011,
                                          0b00000100,
                                          0b01111000,
                                          0b00000100,
                                          0b00000011,
                                          0b00000000,
                                         },
                                        },
                                        // Z
                                        {{0b00111110,
                                          0b00000010,
                                          0b00000100,
                                          0b00001000,
                                          0b00010000,
                                          0b00100000,
                                          0b00111110,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b01100001,
                                          0b01010001,
                                          0b01001001,
                                          0b01000101,
                                          0b01000011,
                                          0b00000000,
                                         },
                                        },

                                        // a
                                        {{0b00000000,
                                          0b00000000,
                                          0b00011000,
                                          0b00000100,
                                          0b00011100,
                                          0b00100100,
                                          0b00011100,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b00100000,
                                          0b01010100,
                                          0b01010100,
                                          0b01111000,
                                          0b00000000,
                                          0b00000000,
                                         },
                                        },
                                        // b
                                        {{0b00100000,
                                          0b00100000,
                                          0b00100000,
                                          0b00111000,
                                          0b00100100,
                                          0b00100100,
                                          0b00111000,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b01111111,
                                          0b01001000,
                                          0b01001000,
                                          0b00110000,
                                          0b00000000,
                                          0b00000000,
                                         },
                                        },
                                        // c
                                        {{0b00000000,
                                          0b00000000,
                                          0b00011000,
                                          0b00100100,
                                          0b00100000,
                                          0b00100100,
                                          0b00011000,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b00111000,
                                          0b01000100,
                                          0b01000100,
                                          0b00101000,
                                          0b00000000,
                                          0b00000000,
                                         },
                                        },
                                        // d
                                        {{0b00000100,
                                          0b00000100,
                                          0b00000100,
                                          0b00011100,
                                          0b00100100,
                                          0b00100100,
                                          0b00011100,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b00110000,
                                          0b01001000,
                                          0b01001000,
                                          0b01111111,
                                          0b00000000,
                                          0b00000000,
                                         },
                                        },
                                        // e
                                        {{0b00000000,
                                          0b00000000,
                                          0b00011000,
                                          0b00100100,
                                          0b00111100,
                                          0b00100000,
                                          0b00011000,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b00111000,
                                          0b01010100,
                                          0b01010100,
                                          0b00011000,
                                          0b00000000,
                                          0b00000000,
                                         },
                                        },
                                        // f
                                        {{0b00001100,
                                          0b00010000,
                                          0b00011100,
                                          0b00010000,
                                          0b00010000,
                                          0b00010000,
                                          0b00010000,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b00000000,
                                          0b01111110,
                                          0b00000101,
                                          0b00000101,
                                          0b00000000,
                                          0b00000000,
                                         },
                                        },
                                        // g
                                        {{0b00000000,
                                          0b00000000,
                                          0b00011100,
                                          0b00100100,
                                          0b00100100,
                                          0b00011100,
                                          0b00000100,
                                          0b00011000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b00011000,
                                          0b10100100,
                                          0b10100100,
                                          0b01111100,
                                          0b00000000,
                                          0b00000000,
                                         },
                                        },
                                        // h
                                        {{0b00100000,
                                          0b00100000,
                                          0b00100000,
                                          0b00111000,
                                          0b00100100,
                                          0b00100100,
                                          0b00100100,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b01111111,
                                          0b00001000,
                                          0b00001000,
                                          0b01110000,
                                          0b00000000,
                                          0b00000000,
                                         },
                                        },
                                        // i
                                        {{0b00001000,
                                          0b00000000,
                                          0b00000000,
                                          0b00001000,
                                          0b00001000,
                                          0b00001000,
                                          0b00001000,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b00000000,
                                          0b00000000,
                                          0b01111001,
                                          0b00000000,
                                          0b00000000,
                                          0b00000000,
                                         },
                                        },
                                        // j
                                        {{0b00001000,
                                          0b00000000,
                                          0b00001000,
                                          0b00001000,
                                          0b00001000,
                                          0b00001000,
                                          0b00001000,
                                          0b00010000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b00000000,
                                          0b10000000,
                                          0b01111101,
                                          0b00000000,
                                          0b00000000,
                                          0b00000000,
                                         },
                                        },
                                        // k
                                        {{0b00100000,
                                          0b00100000,
                                          0b00100100,
                                          0b00101000,
                                          0b00110000,
                                          0b00101000,
                                          0b00100100,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b01111111,
                                          0b00010000,
                                          0b00101000,
                                          0b01000100,
                                          0b00000000,
                                          0b00000000,
                                         },
                                        },
                                        // l
                                        {{0b00010000,
                                          0b00010000,
                                          0b00010000,
                                          0b00010000,
                                          0b00010000,
                                          0b00010000,
                                          0b00001000,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b00000000,
                                          0b00111111,
                                          0b01000000,
                                          0b00000000,
                                          0b00000000,
                                          0b00000000,
                                         },
                                        },
                                        // m
                                        {{0b00000000,
                                          0b00000000,
                                          0b00111100,
                                          0b00101010,
                                          0b00101010,
                                          0b00101010,
                                          0b00101010,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b01111100,
                                          0b00000100,
                                          0b01111100,
                                          0b00000100,
                                          0b01111000,
                                          0b00000000,
                                         },
                                        },
                                        // n
                                        {{0b00000000,
                                          0b00000000,
                                          0b00111000,
                                          0b00100100,
                                          0b00100100,
                                          0b00100100,
                                          0b00100100,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b01111100,
                                          0b00000100,
                                          0b00000100,
                                          0b01111000,
                                          0b00000000,
                                          0b00000000,
                                         },
                                        },
                                        // o
                                        {{0b00000000,
                                          0b00000000,
                                          0b00011000,
                                          0b00100100,
                                          0b00100100,
                                          0b00100100,
                                          0b00011000,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b00111000,
                                          0b01000100,
                                          0b01000100,
                                          0b00111000,
                                          0b00000000,
                                          0b00000000,
                                         },
                                        },
                                        // p
                                        {{0b00000000,
                                          0b00000000,
                                          0b00011000,
                                          0b00100100,
                                          0b00100100,
                                          0b00111000,
                                          0b00100000,
                                          0b00100000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b11111000,
                                          0b00100100,
                                          0b00100100,
                                          0b00011000,
                                          0b00000000,
                                          0b00000000,
                                         },
                                        },
                                        // q
                                        {{0b00000000,
                                          0b00000000,
                                          0b00011000,
                                          0b00100100,
                                          0b00100100,
                                          0b00011100,
                                          0b00000100,
                                          0b00000100,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b00011000,
                                          0b00100100,
                                          0b00100100,
                                          0b11111000,
                                          0b00000000,
                                          0b00000000,
                                         },
                                        },
                                        // r
                                        {{0b00000000,
                                          0b00000000,
                                          0b00101100,
                                          0b00110000,
                                          0b00100000,
                                          0b00100000,
                                          0b00100000,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b01111100,
                                          0b00001000,
                                          0b00000100,
                                          0b00000100,
                                          0b00000000,
                                          0b00000000,
                                         },
                                        },
                                        // s
                                        {{0b00000000,
                                          0b00000000,
                                          0b00011100,
                                          0b00100000,
                                          0b00011000,
                                          0b00000100,
                                          0b00111000,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b01001000,
                                          0b01010100,
                                          0b01010100,
                                          0b00100100,
                                          0b00000000,
                                          0b00000000,
                                         },
                                        },
                                        // t
                                        {{0b00010000,
                                          0b00010000,
                                          0b00111100,
                                          0b00010000,
                                          0b00010000,
                                          0b00010000,
                                          0b00001100,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b00000100,
                                          0b00111111,
                                          0b01000100,
                                          0b01000100,
                                          0b00000000,
                                          0b00000000,
                                         },
                                        },
                                        // u
                                        {{0b00000000,
                                          0b00000000,
                                          0b00100100,
                                          0b00100100,
                                          0b00100100,
                                          0b00100100,
                                          0b00011100,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b00111100,
                                          0b01000000,
                                          0b01000000,
                                          0b01111100,
                                          0b00000000,
                                          0b00000000,
                                         },
                                        },
                                        // v
                                        {{0b00000000,
                                          0b00000000,
                                          0b00100010,
                                          0b00100010,
                                          0b00100010,
                                          0b00010100,
                                          0b00001000,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b00011100,
                                          0b00100000,
                                          0b01000000,
                                          0b00100000,
                                          0b00011100,
                                          0b00000000,
                                         },
                                        },
                                        // w
                                        {{0b00000000,
                                          0b00000000,
                                          0b00100010,
                                          0b00100010,
                                          0b00101010,
                                          0b00101010,
                                          0b00010100,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b00111100,
                                          0b01000000,
                                          0b00110000,
                                          0b01000000,
                                          0b00111100,
                                          0b00000000,
                                         },
                                        },
                                        // x
                                        {{0b00000000,
                                          0b00000000,
                                          0b00100100,
                                          0b00100100,
                                          0b00011000,
                                          0b00100100,
                                          0b00100100,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b01101100,
                                          0b00010000,
                                          0b00010000,
                                          0b01101100,
                                          0b00000000,
                                          0b00000000,
                                         },
                                        },
                                        // y
                                        {{0b00000000,
                                          0b00000000,
                                          0b00100100,
                                          0b00100100,
                                          0b00100100,
                                          0b00011100,
                                          0b00000100,
                                          0b00011000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b00011100,
                                          0b10100000,
                                          0b10100000,
                                          0b01111100,
                                          0b00000000,
                                          0b00000000,
                                         },
                                        },
                                        // z
                                        {{0b00000000,
                                          0b00000000,
                                          0b00111100,
                                          0b00000100,
                                          0b00011000,
                                          0b00100000,
                                          0b00111100,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b01100100,
                                          0b01010100,
                                          0b01010100,
                                          0b01001100,
                                          0b00000000,
                                          0b00000000,
                                         },
                                        },

                                        // 0
                                        {{0b00011100,
                                          0b00100010,
                                          0b00100110,
                                          0b00101010,
                                          0b00110010,
                                          0b00100010,
                                          0b00011100,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b00111110,
                                          0b01010001,
                                          0b01001001,
                                          0b01000101,
                                          0b00111110,
                                          0b00000000,
                                         },
                                        },
                                        // 1
                                        {{0b00001000,
                                          0b00011000,
                                          0b00001000,
                                          0b00001000,
                                          0b00001000,
                                          0b00001000,
                                          0b00011100,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b00000000,
                                          0b01000010,
                                          0b01111111,
                                          0b01000000,
                                          0b00000000,
                                          0b00000000,
                                         },
                                        },
                                        // 2
                                        {{0b00011100,
                                          0b00100010,
                                          0b00000010,
                                          0b00001100,
                                          0b00010000,
                                          0b00100000,
                                          0b00111110,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b01100010,
                                          0b01010001,
                                          0b01001001,
                                          0b01001001,
                                          0b01000110,
                                          0b00000000,
                                         },
                                        },
                                        // 3
                                        {{0b00011100,
                                          0b00100010,
                                          0b00000010,
                                          0b00001100,
                                          0b00000010,
                                          0b00100010,
                                          0b00011100,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b00100010,
                                          0b01000001,
                                          0b01001001,
                                          0b01001001,
                                          0b00110110,
                                          0b00000000,
                                         },
                                        },
                                        // 4
                                        {{0b00000110,
                                          0b00001010,
                                          0b00010010,
                                          0b00100010,
                                          0b00111110,
                                          0b00000010,
                                          0b00000010,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b00011000,
                                          0b00010100,
                                          0b00010010,
                                          0b00010001,
                                          0b01111111,
                                          0b00000000,
                                         },
                                        },
                                        // 5
                                        {{0b00111110,
                                          0b00100000,
                                          0b00111100,
                                          0b00000010,
                                          0b00000010,
                                          0b00100010,
                                          0b00011100,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b00100111,
                                          0b01000101,
                                          0b01000101,
                                          0b01000101,
                                          0b00111001,
                                          0b00000000,
                                         },
                                        },
                                        // 6
                                        {{0b00011100,
                                          0b00100010,
                                          0b00100000,
                                          0b00111100,
                                          0b00100010,
                                          0b00100010,
                                          0b00011100,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b00111110,
                                          0b01001001,
                                          0b01001001,
                                          0b01001001,
                                          0b00110010,
                                          0b00000000,
                                         },
                                        },
                                        // 7
                                        {{0b00111110,
                                          0b00000010,
                                          0b00000100,
                                          0b00001000,
                                          0b00010000,
                                          0b00010000,
                                          0b00010000,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b00000001,
                                          0b01110001,
                                          0b00001001,
                                          0b00000101,
                                          0b00000011,
                                          0b00000000,
                                         },
                                        },
                                        // 8
                                        {{0b00011100,
                                          0b00100010,
                                          0b00100010,
                                          0b00011100,
                                          0b00100010,
                                          0b00100010,
                                          0b00011100,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b00110110,
                                          0b01001001,
                                          0b01001001,
                                          0b01001001,
                                          0b00110110,
                                          0b00000000,
                                         },
                                        },
                                        // 9
                                        {{0b00011100,
                                          0b00100010,
                                          0b00100010,
                                          0b00011110,
                                          0b00000010,
                                          0b00100010,
                                          0b00011100,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b00100110,
                                          0b01001001,
                                          0b01001001,
                                          0b01001001,
                                          0b00111110,
                                          0b00000000,
                                         },
                                        },
                                        // :
                                        {{0b00000000,
                                          0b00000000,
                                          0b00001000,
                                          0b00000000,
                                          0b00000000,
                                          0b00001000,
                                          0b00000000,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b00000000,
                                          0b00000000,
                                          0b00100100,
                                          0b00000000,
                                          0b00000000,
                                          0b00000000,
                                         },
                                        },
                                        // ,
                                        {{0b00000000,
                                          0b00000000,
                                          0b00000000,
                                          0b00000000,
                                          0b00000000,
                                          0b00001000,
                                          0b00010000,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b00000000,
                                          0b01000000,
                                          0b00100000,
                                          0b00000000,
                                          0b00000000,
                                          0b00000000,
                                         },
                                        },
                                        // .
                                        {{0b00000000,
                                          0b00000000,
                                          0b00000000,
                                          0b00000000,
                                          0b00000000,
                                          0b00000000,
                                          0b00001000,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b00000000,
                                          0b00000000,
                                          0b01000000,
                                          0b00000000,
                                          0b00000000,
                                          0b00000000,
                                         },
                                        },
                                        // (
                                        {{0b00001000,
                                          0b00010000,
                                          0b00010000,
                                          0b00010000,
                                          0b00010000,
                                          0b00010000,
                                          0b00001000,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b00000000,
                                          0b00111110,
                                          0b01000001,
                                          0b00000000,
                                          0b00000000,
                                          0b00000000,
                                         },
                                        },
                                        // )
                                        {{0b00010000,
                                          0b00001000,
                                          0b00001000,
                                          0b00001000,
                                          0b00001000,
                                          0b00001000,
                                          0b00010000,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b00000000,
                                          0b01000001,
                                          0b00111110,
                                          0b00000000,
                                          0b00000000,
                                          0b00000000,
                                         },
                                        },
                                        // ?
                                        {{0b00011100,
                                          0b00100010,
                                          0b00000010,
                                          0b00000100,
                                          0b00001000,
                                          0b00000000,
                                          0b00001000,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b00000010,
                                          0b00000001,
                                          0b01010001,
                                          0b00001001,
                                          0b00000110,
                                          0b00000000,
                                         },
                                        },
                                        // -
                                        {{0b00000000,
                                          0b00000000,
                                          0b00000000,
                                          0b00000000,
                                          0b00011100,
                                          0b00000000,
                                          0b00000000,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b00000000,
                                          0b00010000,
                                          0b00010000,
                                          0b00010000,
                                          0b00000000,
                                          0b00000000,
                                         },
                                        },

                                        // 
                                        {{0b00011110,
                                          0b00100010,
                                          0b00100010,
                                          0b00111110,
                                          0b00100010,
                                          0b00100010,
                                          0b00100010,
                                          0b00000000,
                                         },
                                         {0b00111000,
                                          0b00101000,
                                          0b00111000,
                                          0b00000100,
                                          0b11101010,
                                          0b10101001,
                                          0b10101010,
                                          0b11100100,
                                         },
                                        },
                                        // 
                                        {{0b00111100,
                                          0b00100010,
                                          0b00100010,
                                          0b00111100,
                                          0b00100010,
                                          0b00100010,
                                          0b00111100,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b00100100,
                                          0b00010010,
                                          0b01000011,
                                          0b11111110,
                                          0b00000010,
                                          0b00010110,
                                          0b00100010,
                                         },
                                        },
                                        // 
                                        {{0b00011100,
                                          0b00100010,
                                          0b00100000,
                                          0b00100000,
                                          0b00100000,
                                          0b00100010,
                                          0b00011100,
                                          0b00000000,
                                         },
                                         {0b11000101,
                                          0b00101010,
                                          0b00000000,
                                          0b01000110,
                                          0b11111010,
                                          0b01010111,
                                          0b11110010,
                                          0b01000110,
                                         },
                                        },
                                        // 
                                        {{0b00111100,
                                          0b00100010,
                                          0b00100010,
                                          0b00100010,
                                          0b00100010,
                                          0b00100010,
                                          0b00111100,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b10000000,
                                          0b10000001,
                                          0b10000001,
                                          0b11111111,
                                          0b10000001,
                                          0b10000001,
                                          0b10000000,
                                         },
                                        },
                                        // 
                                        {{0b00111110,
                                          0b00100000,
                                          0b00100000,
                                          0b00111100,
                                          0b00100000,
                                          0b00100000,
                                          0b00111110,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b10011000,
                                          0b10100000,
                                          0b11111111,
                                          0b10000000,
                                          0b11111111,
                                          0b10100000,
                                          0b10011000,
                                         },
                                        },
                                        // 
                                        {{0b00111110,
                                          0b00100000,
                                          0b00100000,
                                          0b00111100,
                                          0b00100000,
                                          0b00100000,
                                          0b00100000,
                                          0b00000000,
                                         },
                                         {0b10001000,
                                          0b01001000,
                                          0b00101000,
                                          0b00011111,
                                          0b00101000,
                                          0b01001000,
                                          0b10001000,
                                          0b00000000,
                                         },
                                        },
                                        // 
                                        {{0b00011100,
                                          0b00100010,
                                          0b00100000,
                                          0b00100000,
                                          0b00100110,
                                          0b00100010,
                                          0b00011100,
                                          0b00000000,
                                         },
                                         {0b00001100,
                                          0b00100010,
                                          0b00101011,
                                          0b10101010,
                                          0b11111011,
                                          0b00101010,
                                          0b00100011,
                                          0b00001100,
                                         },
                                        },
                                        // 
                                        {{0b00100000,
                                          0b00100000,
                                          0b00100000,
                                          0b00100000,
                                          0b00100000,
                                          0b00100000,
                                          0b00111110,
                                          0b00000000,
                                         },
                                         {0b10010100,
                                          0b01111111,
                                          0b10010100,
                                          0b10011111,
                                          0b01000001,
                                          0b10111111,
                                          0b10000001,
                                          0b11011111,
                                         },
                                        },
                                        // 
                                        {{0b00100010,
                                          0b00100010,
                                          0b00110010,
                                          0b00101010,
                                          0b00100110,
                                          0b00100010,
                                          0b00100010,
                                          0b00000000,
                                         },
                                         {0b10000000,
                                          0b01110101,
                                          0b00011001,
                                          0b00011111,
                                          0b00010001,
                                          0b00011111,
                                          0b00011001,
                                          0b00010101,
                                         },
                                        },
                                        // 
                                        {{0b00100010,
                                          0b00100010,
                                          0b00110010,
                                          0b00101010,
                                          0b00100110,
                                          0b00100010,
                                          0b00100010,
                                          0b00000000,
                                         },
                                         {0b00110100,
                                          0b11111111,
                                          0b00110100,
                                          0b00010010,
                                          0b11110101,
                                          0b10101010,
                                          0b10111010,
                                          0b11010110,
                                         },
                                        },
                                        // 
                                        {{0b00011100,
                                          0b00100010,
                                          0b00100010,
                                          0b00100010,
                                          0b00100010,
                                          0b00100010,
                                          0b00011100,
                                          0b00000000,
                                         },
                                         {0b00100100,
                                          0b00111100,
                                          0b00100100,
                                          0b10000000,
                                          0b01000100,
                                          0b00111111,
                                          0b10000100,
                                          0b11111100,
                                         },
                                        },
                                        // 
                                        {{0b00111100,
                                          0b00100010,
                                          0b00100010,
                                          0b00111100,
                                          0b00100000,
                                          0b00100000,
                                          0b00100000,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b10010000,
                                          0b10010100,
                                          0b01010100,
                                          0b00111111,
                                          0b01010100,
                                          0b10010100,
                                          0b10010000,
                                         },
                                        },
                                        // 
                                        {{0b00011100,
                                          0b00100010,
                                          0b00100010,
                                          0b00100010,
                                          0b00101010,
                                          0b00100100,
                                          0b00011010,
                                          0b00000000,
                                         },
                                         {0b10010101,
                                          0b11111111,
                                          0b10010101,
                                          0b10010101,
                                          0b00000000,
                                          0b00011100,
                                          0b10000000,
                                          0b11111111,
                                         },
                                        },
                                        // 
                                        {{0b00111100,
                                          0b00100010,
                                          0b00100010,
                                          0b00111100,
                                          0b00100010,
                                          0b00100010,
                                          0b00100010,
                                          0b00000000,
                                         },
                                         {0b00001110,
                                          0b10100010,
                                          0b01010110,
                                          0b10101111,
                                          0b11111110,
                                          0b00100110,
                                          0b01010010,
                                          0b10001110,
                                         },
                                        },
                                        // 
                                        {{0b00100010,
                                          0b00100010,
                                          0b00100010,
                                          0b00111110,
                                          0b00100010,
                                          0b00100010,
                                          0b00100010,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b11111001,
                                          0b10101001,
                                          0b10101101,
                                          0b10101011,
                                          0b10101001,
                                          0b11111001,
                                          0b00000000,
                                         },
                                        },
                                        // 
                                        {{0b00011100,
                                          0b00001000,
                                          0b00001000,
                                          0b00001000,
                                          0b00001000,
                                          0b00001000,
                                          0b00011100,
                                          0b00000000,
                                         },
                                         {0b00100100,
                                          0b00110010,
                                          0b00101011,
                                          0b00101010,
                                          0b11111110,
                                          0b00101010,
                                          0b00101010,
                                          0b00100000,
                                         },
                                        },
                                        // 
                                        {{0b00000110,
                                          0b00000010,
                                          0b00000010,
                                          0b00000010,
                                          0b00100010,
                                          0b00100010,
                                          0b00011100,
                                          0b00000000,
                                         },
                                         {0b00110100,
                                          0b11111111,
                                          0b00010100,
                                          0b10001010,
                                          0b01010110,
                                          0b00100011,
                                          0b01010110,
                                          0b10001010,
                                          },
                                        },
                                        // 
                                        {{0b00100010,
                                          0b00100100,
                                          0b00101000,
                                          0b00110000,
                                          0b00101000,
                                          0b00100100,
                                          0b00100010,
                                          0b00000000,
                                         },
                                         {0b10000000,
                                          0b01000000,
                                          0b00111110,
                                          0b10010010,
                                          0b01010011,
                                          0b00111110,
                                          0b01010010,
                                          0b10010010,
                                         },
                                        },
                                        //
                                        {{0b00,
                                          0b00,
                                          0b00,
                                          0b00,
                                          0b00,
                                          0b00,
                                          0b00,
                                          0b00000000,
                                         },
                                         {0b00000000,
                                          0b00000000,
                                          0b0,
                                          0b0,
                                          0b0,
                                          0b0,
                                          0b0,
                                          0b00000000,
                                         },
                                        },
                                       };


void write_byte(unsigned char data) {
    char i;
    for (i = 8; i > 0; i--) {
        CLK_0;
        if (0x80 & data) {
            DIN_1;
        } else {
            DIN_0;
        }
        data = data << 1;
        CLK_1;
    }
}


void write(unsigned char addr1, unsigned char data1, unsigned char addr2, unsigned char data2,
           unsigned char addr3, unsigned char data3, unsigned char addr4, unsigned char data4)
{
     CS_0;
     write_byte(addr1);              //
     write_byte(data1);              //
     write_byte(addr2);              //
     write_byte(data2);              //
     write_byte(addr3);              //
     write_byte(data3);              //
     write_byte(addr4);              //
     write_byte(data4);              //
     CS_1;
}

void init1(void)
{
    P6DIR |= BIT0 + BIT1 + BIT2;
    write(0x09, 0x00, 0x09, 0x00, 0x09, 0x00, 0x09, 0x00);       //BCD
    write(0x0A, 0x03, 0x0A, 0x03, 0x0A, 0x03, 0x0A, 0x03);       //
    write(0x0B, 0x07, 0x0B, 0x07, 0x0B, 0x07, 0x0B, 0x07);       //8
    write(0x0C, 0x01, 0x0C, 0x01, 0x0C, 0x01, 0x0C, 0x01);       //01
    write(0x0F, 0x01, 0x0F, 0x01, 0x0F, 0x01, 0x0F, 0x01);       //10
  //delay_ms(1000);
    write(0x0F, 0x00, 0x0F, 0x00, 0x0F, 0x00, 0x0F, 0x00);
}

unsigned int char2bit(char m) {
    unsigned int n;
    if (m == '\0') {
        return 99;
    }
    if (65 <= m && m <= 90) {
        n = m - 64;
    } else if (97 <= m && m <= 122) {
        n = m - 96 + 26;
    } else if (48 <= m && m <= 64) {
        n =  m - 47 + 26 + 26;
        // :;<=>?@
        // :,.()?-
    } else if (33 <= m && m <= 46) {
        n = m - 32 + 26 + 26 + 17;
        // !"#$%&'()*+,-.
    } else if (91 <= m && m <= 94) {
        n = m - 90 + 26 * 2 + 17 + 14;
        // [\]^
    } else {
        n = 0;
    }
    return n;
}

void display(char* text) {
    unsigned int i, j, k, m, n, q;

    unsigned char led[4][8] = {{0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
                               {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
                               {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
                               {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}};

    for (i = 0; k != 99; i++) {
        k = char2bit(text[i]);

        for  (q = 0; q < 9; q++) {
            if (text[i] != 32) {
                while (character[k][1][q] == 0x00) {
                    q++;
                }
            } else {
                q += 2;
            }

            for (j = 0; j < 31; j++) {
                led[0][j] = led[0][j + 1];
            }

            led[3][7] = character[k][1][q];
            if (q >= 8) {
                led[3][7] = character[0][1][0];
            }

            for (j = 0; j < 8; j++) {
                write(j + 1, led[0][j], j + 1, led[1][j], j + 1, led[2][j], j + 1, led[3][j]);
            }

            delay_ms(50);
        }
    }

    for (i = 0; i < 32; i++) {
            for (j = 0; j < 31; j++) {
                led[0][j] = led [0][j + 1];
            }
            led[3][7] = 0x00;
            for (j = 0; j < 8; j++) {
                write(j + 1, led[0][j], j + 1, led[1][j], j + 1, led[2][j], j + 1, led[3][j]);
            }
            delay_ms(50);
        }
}

void set_frequency(int x) {
    if (x == 0) {
        TA0CCTL0 &= ~ 0x0011;
    } else {
        TA0CCTL0 |= 0x0010;
    }

    int f[4][7] = {{'C', 'D', 'E', 'F', 'G', 'A', 'B'},
                // {251, 223, 199, 188, 167, 149, 133},
                   {125, 112, 99,  94,  84,  74,  66 },
                   {63,  56,  50,  47,  42,  37,  33 },
                   {31,  28,  25,  23,  21,  19,  17 }};
    TA0CCR0 = f[x / 10][x % 10 - 1];
}

int song[MAX_NOTE] = {11, 12, 13, 14, 15, 16, 17, 0, 0, 0, 21, 22, 23, 24, 25, 26, 27, 0, 0, 0, 31, 32, 33, 34, 35, 36, 37,};
int pos = 0;
char flag = 0;

void init2() {
    WDTCTL = WDT_ADLY_250;               // 250ms
    SFRIE1 |= WDTIE;                     // WDT
    P1DIR |= BIT0;                       // P1.0

    TA0CTL = 0x0110;                     // ACLK(32768)
    TA0CCR0 = 32768;                     // CCR0
    TA0CCTL0 &= ~ 0x0011;                // 

                                         // LED
    P8DIR |= 0x02;                       // L1P8.1
    P3DIR |= 0xE0;                       // L2P3.7L6P3.5P3.6
    P6DIR |= 0x18;                       // L4P6.3L5P6.4
    P7DIR |= 0x10;                       // L3P7.4

    P8OUT &= ~ 0x02;
    P3OUT &= ~ 0xE0;
    P6OUT &= ~ 0x08;

    P1DIR &= ~ 0x0C;                     // 
    P1REN |= 0x0C;                       // S1P1.2S2P1.3
    P1OUT |= 0x0C;

    P1IE |= 0x0C;
    P1IES |= 0x0C;
    P1IFG &= ~ 0x0C;

    P2DIR &= ~ 0x48;
    P2REN |= 0x48;                       // S3P2.3S4P2.6
    P2OUT |= 0x48;

    P2IE |= 0x48;
    P2IES |= 0x48;
    P2IFG &= ~ 0x48;
}


int main(void)
{
    _enable_interrupts();                // 

    init1();
    init2();


    int i;
    char* text0 = { "Harbin Institute of Technology; Shenzhen" };
    char* text1 = { "!\"#$%&'" };
    char* text2 = { "(*)*;+,-.<" };
    char* text3 = { "1920 @ 2020  [\\]^" };

    while (1) {
        for (i = 0; i < 4; i++) {
            switch (i) {
                case 0:
                    display(text0);
                    break;
                case 1:
                    display(text1);
                    break;
                case 2:
                    display(text2);
                    break;
                case 3:
                    display(text3);
                    break;
                default:
                    break;
            }
        }

    }

    return 0;
}









#pragma vector=PORT1_VECTOR
__interrupt void Port_1_Key(void) {
    if (P1IFG & 0x04) {                  // S1

        P1IFG &= ~ 0x04;                 // 
        delay_ms(100);
    }
    if (P1IFG & 0x08) {                  // S2


        P1IFG &= ~ 0x08;                 // 
        delay_ms(100);
    }
}

#pragma vector=PORT2_VECTOR
__interrupt void Port_2_Key(void) {
    if (P2IFG & 0x08) {                  // S3
        flag = 1;
        pos = 0;
        P2IFG &= ~ 0x08;                 // 
        delay_ms(100);
    }
    if (P2IFG & 0x40) {                  // S4
        flag = 0;
        TA0CCTL0 &= ~ 0x0010;            // 
        P2IFG &= ~ 0x40;                 // 
        delay_ms(100);
    }
}

#pragma vector=TIMER0_A0_VECTOR
__interrupt void Timer_A0(void) {        // CCR0

    P3OUT ^= 0x40;                       // 
}

#pragma vector= WDT_VECTOR
__interrupt void watchdog_timer (void) {
    P1OUT ^= 0x01;                       // P1.0

    if (flag) {
        if (pos > MAX_NOTE) {
            pos = 0;
        }
        set_frequency(song[pos++]);
    }


}

